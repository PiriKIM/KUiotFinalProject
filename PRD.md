# 자세요정 (Product Requirements Document)

## 1. 프로젝트 개요

### 1.1 프로젝트명
**자세요정** - AI 기반 체형 분석 및 자세 교정 웹 애플리케이션

### 1.2 프로젝트 목적
현대인의 잘못된 자세로 인한 체형 불균형 문제를 해결하기 위해 AI 기술을 활용한 체형 분석 및 실시간 자세 교정 피드백을 제공하는 웹 애플리케이션

### 1.3 타겟 사용자
- 장시간 앉아서 업무/학습하는 직장인 및 학생
- 체형 교정에 관심이 있는 일반인
- 만성적인 목/어깨 통증을 겪는 사람들

## 2. 핵심 기능

### 2.1 체형 분석 모드 (전신 분석)
- **기능**: 웹캠 또는 사진 업로드를 통한 전신 체형 분석
- **분석 항목**: 
  - 정면/측면 체형 분석
  - 척추 정렬 상태
  - 어깨 높이 차이
  - 골반 기울기
  - 전후 경사각도
- **출력**: 
  - 체형 분석 리포트
  - 개선 권장사항
  - 변화 추이 그래프

### 2.2 실시간 자세 교정 모드
- **기능**: 웹캠을 통한 실시간 자세 모니터링
- **분석 항목**:
  - 귀, 턱, 목, 어깨, 골반 좌표 추적
  - 거북목 각도 계산
  - 척추 정렬 상태
- **출력**:
  - 실시간 자세 등급 (A/B/C/D)
  - 시각적 피드백
  - TTS 음성 알림 (나쁜 자세 지속 시)

### 2.3 데이터 관리 및 통계
- **기능**: 사용자별 체형 변화 데이터 저장 및 분석
- **제공 정보**:
  - 체형 변화 추이 그래프
  - 자세 개선 통계
  - 이전 분석 데이터 비교

## 3. 기술 스택

### 3.1 백엔드
- **언어**: Python 3.9+
- **웹 프레임워크**: FastAPI
- **AI/Computer Vision**: 
  - OpenCV
  - MediaPipe
  - NumPy
- **데이터베이스**: SQLite (개발) / PostgreSQL (운영)
- **인증**: JWT

### 3.2 프론트엔드
- **언어**: HTML5, CSS3, JavaScript
- **프레임워크**: React.js (선택사항)
- **UI 라이브러리**: Bootstrap 또는 Tailwind CSS
- **차트**: Chart.js 또는 D3.js

### 3.3 추가 도구
- **TTS**: pyttsx3 또는 gTTS
- **이미지 처리**: Pillow
- **API 문서**: Swagger/OpenAPI

## 4. 시스템 아키텍처

### 4.1 전체 구조
```
Frontend (React/HTML) 
    ↓ HTTP/WebSocket
Backend (FastAPI)
    ↓
AI Engine (OpenCV + MediaPipe)
    ↓
Database (SQLite/PostgreSQL)
```

### 4.2 주요 컴포넌트
1. **사용자 인증 모듈**
2. **이미지/비디오 처리 모듈**
3. **체형 분석 엔진**
4. **실시간 자세 감지 엔진**
5. **데이터 저장 및 분석 모듈**
6. **TTS 알림 모듈**

## 5. 데이터베이스 설계

### 5.1 주요 테이블
- **users**: 사용자 정보
- **posture_sessions**: 자세 교정 세션
- **body_analysis**: 체형 분석 결과
- **posture_alerts**: 자세 알림 기록

## 6. API 설계

### 6.1 주요 엔드포인트
- `POST /auth/login`: 로그인
- `POST /auth/register`: 회원가입
- `POST /analyze/body`: 체형 분석
- `POST /analyze/posture`: 자세 분석
- `GET /statistics/{user_id}`: 통계 조회
- `WebSocket /ws/posture`: 실시간 자세 모니터링

## 7. 성능 요구사항

### 7.1 응답 시간
- 웹캠 프레임 처리: < 100ms
- 체형 분석: < 5초
- API 응답: < 2초

### 7.2 정확도
- 자세 감지 정확도: > 90%
- 체형 분석 정확도: > 85%

## 8. 보안 요구사항

### 8.1 데이터 보호
- 사용자 이미지 데이터 암호화 저장
- 개인정보 보호 (GDPR 준수)
- HTTPS 통신 필수

### 8.2 접근 제어
- JWT 기반 인증
- 세션 관리
- API 요청 제한

## 9. 개발 일정

### 9.1 Phase 1 (4주)
- 프로젝트 설정 및 기본 구조
- 사용자 인증 시스템
- 기본 웹캠 연동

### 9.2 Phase 2 (6주)
- MediaPipe 기반 자세 감지
- 실시간 자세 교정 모드
- TTS 알림 시스템

### 9.3 Phase 3 (4주)
- 체형 분석 모드
- 데이터베이스 연동
- 통계 및 그래프 기능

### 9.4 Phase 4 (2주)
- UI/UX 개선
- 테스트 및 버그 수정
- 배포 준비

## 10. 성공 지표

### 10.1 기술적 지표
- 자세 감지 정확도 > 90%
- 실시간 처리 지연 < 100ms
- 시스템 가동률 > 99%

### 10.2 사용자 지표
- 일일 활성 사용자 수
- 자세 개선 만족도
- 재사용률

## 11. 위험 요소 및 대응 방안

### 11.1 기술적 위험
- **위험**: AI 모델 정확도 부족
- **대응**: 다양한 테스트 데이터로 모델 개선

### 11.2 보안 위험
- **위험**: 개인정보 유출
- **대응**: 데이터 암호화 및 접근 제어 강화

### 11.3 성능 위험
- **위험**: 실시간 처리 지연
- **대응**: 최적화 및 캐싱 전략 수립 