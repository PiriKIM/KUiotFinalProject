<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>분석 기록 - {{ user.username }}</title>
    <link rel="stylesheet" href="{{ url_for('crud.static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('crud.static', filename='history.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-brand">자세 분석 시스템</div>
        <ul class="navbar-nav">
            <li><a href="{{ url_for('crud.index') }}">분석</a></li>
            <li><a href="{{ url_for('crud.history') }}">기록</a></li>
            <li><a href="{{ url_for('crud.statistics') }}">통계</a></li>
            <li><a href="{{ url_for('auth.profile') }}">프로필</a></li>
            <li><a href="{{ url_for('auth.logout') }}">로그아웃</a></li>
        </ul>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1 class="page-title">분석 기록</h1>
            <p class="page-subtitle">{{ user.username }}님의 자세 분석 기록입니다.</p>
        </div>
        
        <div class="records-container">
            {% if records %}
                {% for record in records %}
                <div class="record-card">
                    <div class="record-header">
                        <div class="record-date">{{ record.created_at.strftime('%Y년 %m월 %d일 %H:%M') }}</div>
                        <div class="record-score">
                            <span class="score-number">{{ record.score }}</span>
                            <span class="grade-badge grade-{{ record.grade.lower() }}">{{ record.grade }}</span>
                        </div>
                    </div>
                    
                    <div class="record-details">
                        <div class="detail-item">
                            <div class="detail-label">목 각도</div>
                            <div class="detail-value {{ 'good' if record.neck_angle <= 45 else 'warning' if record.neck_angle <= 60 else 'bad' }}">
                                {{ record.neck_angle|round(1) }}°
                            </div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">어깨 균형</div>
                            <div class="detail-value {{ 'good' if record.shoulder_balance <= 5 else 'warning' if record.shoulder_balance <= 10 else 'bad' }}">
                                {{ record.shoulder_balance|round(1) }}°
                            </div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">등 굽음</div>
                            <div class="detail-value {{ 'good' if record.back_curve <= 10 else 'warning' if record.back_curve <= 20 else 'bad' }}">
                                {{ record.back_curve|round(1) }}°
                            </div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">분석 시간</div>
                            <div class="detail-value">{{ record.duration }}초</div>
                        </div>
                    </div>
                </div>
                {% endfor %}
                
                {% if pagination.pages > 1 %}
                <div class="pagination">
                    {% if pagination.has_prev %}
                        <a href="{{ url_for('crud.history', page=pagination.prev_num) }}">이전</a>
                    {% endif %}
                    
                    {% for page_num in pagination.iter_pages() %}
                        {% if page_num %}
                            {% if page_num != pagination.page %}
                                <a href="{{ url_for('crud.history', page=page_num) }}">{{ page_num }}</a>
                            {% else %}
                                <span class="current">{{ page_num }}</span>
                            {% endif %}
                        {% else %}
                            <span>...</span>
                        {% endif %}
                    {% endfor %}
                    
                    {% if pagination.has_next %}
                        <a href="{{ url_for('crud.history', page=pagination.next_num) }}">다음</a>
                    {% endif %}
                </div>
                {% endif %}
            {% else %}
                <div style="text-align: center; padding: 40px; color: #666;">
                    <p>아직 분석 기록이 없습니다.</p>
                    <p>자세 분석을 시작해보세요!</p>
                </div>
            {% endif %}
        </div>
    </div>
</body>
</html> 