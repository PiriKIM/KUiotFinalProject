# MediaPipe를 활용한 자세 분석 (`neck.py`)

## 개요
이 프로젝트는 MediaPipe와 웹캠을 이용한 실시간 자세 분석 도구입니다. 목(거북목) 자세 등급화에 중점을 두며, 척추 굴곡, 어깨 비대칭, 골반 기울어짐, 척추 틀어짐도 함께 분석합니다. 등급(A/B/C/D)은 목 각도를 기준으로 부여되며, 시각적/콘솔 피드백을 제공합니다.

## 주요 기능
- **실시간 웹캠 자세 분석**
- **거북목(목 각도) 등급화**: 이상적 자세와의 차이로 A/B/C/D 등급 부여
- **척추 굴곡, 어깨 비대칭, 골반 기울어짐, 척추 틀어짐 분석**
- **시각적 피드백**: 관절, 분석선, 등급 표시
- **콘솔 출력**: 각 프레임별 상세 분석 결과
- **UI**: 등급/설명 우상단 표시

## 파일 설명
- `neck.py`: MediaPipe와 OpenCV 기반 실시간 자세 분석 메인 스크립트

## 필요 환경
- Python 3.7 이상
- [mediapipe](https://pypi.org/project/mediapipe/)
- [opencv-python](https://pypi.org/project/opencv-python/)
- numpy
- Pillow (옵션, 폰트 렌더링용)

설치 방법:
```bash
pip install mediapipe opencv-python numpy Pillow
```

## 실행 방법
1. **웹캠을 컴퓨터에 연결**하세요.
2. `neck.py` 파일을 작업 폴더에 위치시킵니다.
3. 아래 명령어로 실행:
   ```bash
   python neck.py
   ```
4. 분석 창이 뜨면 ESC 키로 종료할 수 있습니다.

## 등급 시스템 (목 각도)
- 귀/어깨 랜드마크로 목 각도를 계산합니다.
- **A (완벽한 자세):** 기준(이상적) 각도 ±2° 이내
- **B (양호한 자세):** ±5° 이내
- **C (보통 자세):** ±10° 이내
- **D (나쁜 자세):** ±10° 초과
- 기준 각도는 이상적 자세 이미지를 분석해 설정할 수 있습니다.

## UI 설명
- **우상단:**
  - `Grade: A/B/C/D` (큰 글씨)
  - 등급 설명 (예: "완벽한 자세")
- **좌측:**
  - 상세 분석(목 각도, 척추, 어깨, 골반, 척추틀어짐)
- **관절/분석선:**
  - 주요 관절 및 분석선 시각화

## 기준 각도 커스터마이징
1. 옆모습의 이상적 자세 이미지를 준비합니다.
2. `analyze_image_pose.py` 등으로 목 각도를 추출합니다.
3. `neck.py`의 `reference_angle` 값을 해당 각도로 수정합니다.

## 문제 해결
- 웹캠이 동작하지 않으면 권한 또는 카메라 인덱스를 코드에서 변경해보세요.
- UI가 보이지 않으면 OpenCV GUI가 지원되는 환경(데스크탑)에서 실행하세요.

## 라이선스
이 프로젝트는 Apache-2.0 라이선스로 배포됩니다.

---

자세한 내용은 [GitHub 저장소](https://github.com/PiriKIM/KUiotFinalProject/tree/yunjin)에서 확인하세요. 